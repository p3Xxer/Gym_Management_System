{"ast":null,"code":"import { colorToRgb, getDistance, getLinkColor, getRangeValue } from \"tsparticles-engine\";\nimport { drawLinkLine, drawLinkTriangle } from \"./Utils\";\nexport class LinkInstance {\n  constructor(container) {\n    this.container = container;\n  }\n\n  particleCreated(particle) {\n    const linkParticle = particle;\n    linkParticle.links = [];\n  }\n\n  particleDestroyed(particle) {\n    const linkParticle = particle;\n    linkParticle.links = [];\n  }\n\n  drawParticle(context, particle) {\n    const linkParticle = particle,\n          container = this.container,\n          particles = container.particles,\n          pOptions = particle.options;\n\n    if (linkParticle.links.length <= 0) {\n      return;\n    }\n\n    context.save();\n    const p1Links = linkParticle.links.filter(l => {\n      const linkFreq = container.particles.getLinkFrequency(linkParticle, l.destination);\n      return linkFreq <= pOptions.links.frequency;\n    });\n\n    for (const link of p1Links) {\n      const p2 = link.destination;\n\n      if (pOptions.links.triangles.enable) {\n        const links = p1Links.map(l => l.destination),\n              vertices = p2.links.filter(t => {\n          const linkFreq = container.particles.getLinkFrequency(p2, t.destination);\n          return linkFreq <= p2.options.links.frequency && links.indexOf(t.destination) >= 0;\n        });\n\n        if (vertices.length) {\n          for (const vertex of vertices) {\n            const p3 = vertex.destination,\n                  triangleFreq = particles.getTriangleFrequency(linkParticle, p2, p3);\n\n            if (triangleFreq > pOptions.links.triangles.frequency) {\n              continue;\n            }\n\n            this.drawLinkTriangle(linkParticle, link, vertex);\n          }\n        }\n      }\n\n      if (link.opacity > 0 && container.retina.linksWidth > 0) {\n        this.drawLinkLine(linkParticle, link);\n      }\n    }\n\n    context.restore();\n  }\n\n  drawLinkTriangle(p1, link1, link2) {\n    var _a;\n\n    const container = this.container,\n          options = container.actualOptions,\n          p2 = link1.destination,\n          p3 = link2.destination,\n          triangleOptions = p1.options.links.triangles,\n          opacityTriangle = (_a = triangleOptions.opacity) !== null && _a !== void 0 ? _a : (link1.opacity + link2.opacity) / 2;\n\n    if (opacityTriangle <= 0) {\n      return;\n    }\n\n    container.canvas.draw(ctx => {\n      const pos1 = p1.getPosition();\n      const pos2 = p2.getPosition();\n      const pos3 = p3.getPosition();\n\n      if (getDistance(pos1, pos2) > container.retina.linksDistance || getDistance(pos3, pos2) > container.retina.linksDistance || getDistance(pos3, pos1) > container.retina.linksDistance) {\n        return;\n      }\n\n      let colorTriangle = colorToRgb(triangleOptions.color);\n\n      if (!colorTriangle) {\n        const linksOptions = p1.options.links,\n              linkColor = linksOptions.id !== undefined ? container.particles.linksColors.get(linksOptions.id) : container.particles.linksColor;\n        colorTriangle = getLinkColor(p1, p2, linkColor);\n      }\n\n      if (!colorTriangle) {\n        return;\n      }\n\n      drawLinkTriangle(ctx, pos1, pos2, pos3, options.backgroundMask.enable, options.backgroundMask.composite, colorTriangle, opacityTriangle);\n    });\n  }\n\n  drawLinkLine(p1, link) {\n    const container = this.container,\n          options = container.actualOptions,\n          p2 = link.destination,\n          pos1 = p1.getPosition(),\n          pos2 = p2.getPosition();\n    let opacity = link.opacity;\n    container.canvas.draw(ctx => {\n      var _a, _b;\n\n      let colorLine;\n      const twinkle = p1.options.twinkle.lines;\n\n      if (twinkle.enable) {\n        const twinkleFreq = twinkle.frequency,\n              twinkleRgb = colorToRgb(twinkle.color),\n              twinkling = Math.random() < twinkleFreq;\n\n        if (twinkling && twinkleRgb) {\n          colorLine = twinkleRgb;\n          opacity = getRangeValue(twinkle.opacity);\n        }\n      }\n\n      if (!colorLine) {\n        const linksOptions = p1.options.links,\n              linkColor = linksOptions.id !== undefined ? container.particles.linksColors.get(linksOptions.id) : container.particles.linksColor;\n        colorLine = getLinkColor(p1, p2, linkColor);\n      }\n\n      if (!colorLine) {\n        return;\n      }\n\n      const width = (_a = p1.retina.linksWidth) !== null && _a !== void 0 ? _a : container.retina.linksWidth,\n            maxDistance = (_b = p1.retina.linksDistance) !== null && _b !== void 0 ? _b : container.retina.linksDistance;\n      drawLinkLine(ctx, width, pos1, pos2, maxDistance, container.canvas.size, p1.options.links.warp, options.backgroundMask.enable, options.backgroundMask.composite, colorLine, opacity, p1.options.links.shadow);\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/khushil/Projects/Temp/gamma/node_modules/tsparticles-interaction-particles-links/LinkInstance.js"],"names":["colorToRgb","getDistance","getLinkColor","getRangeValue","drawLinkLine","drawLinkTriangle","LinkInstance","constructor","container","particleCreated","particle","linkParticle","links","particleDestroyed","drawParticle","context","particles","pOptions","options","length","save","p1Links","filter","l","linkFreq","getLinkFrequency","destination","frequency","link","p2","triangles","enable","map","vertices","t","indexOf","vertex","p3","triangleFreq","getTriangleFrequency","opacity","retina","linksWidth","restore","p1","link1","link2","_a","actualOptions","triangleOptions","opacityTriangle","canvas","draw","ctx","pos1","getPosition","pos2","pos3","linksDistance","colorTriangle","color","linksOptions","linkColor","id","undefined","linksColors","get","linksColor","backgroundMask","composite","_b","colorLine","twinkle","lines","twinkleFreq","twinkleRgb","twinkling","Math","random","width","maxDistance","size","warp","shadow"],"mappings":"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","sourcesContent":["import { colorToRgb, getDistance, getLinkColor, getRangeValue } from \"tsparticles-engine\";\nimport { drawLinkLine, drawLinkTriangle } from \"./Utils\";\nexport class LinkInstance {\n    constructor(container) {\n        this.container = container;\n    }\n    particleCreated(particle) {\n        const linkParticle = particle;\n        linkParticle.links = [];\n    }\n    particleDestroyed(particle) {\n        const linkParticle = particle;\n        linkParticle.links = [];\n    }\n    drawParticle(context, particle) {\n        const linkParticle = particle, container = this.container, particles = container.particles, pOptions = particle.options;\n        if (linkParticle.links.length <= 0) {\n            return;\n        }\n        context.save();\n        const p1Links = linkParticle.links.filter((l) => {\n            const linkFreq = container.particles.getLinkFrequency(linkParticle, l.destination);\n            return linkFreq <= pOptions.links.frequency;\n        });\n        for (const link of p1Links) {\n            const p2 = link.destination;\n            if (pOptions.links.triangles.enable) {\n                const links = p1Links.map((l) => l.destination), vertices = p2.links.filter((t) => {\n                    const linkFreq = container.particles.getLinkFrequency(p2, t.destination);\n                    return linkFreq <= p2.options.links.frequency && links.indexOf(t.destination) >= 0;\n                });\n                if (vertices.length) {\n                    for (const vertex of vertices) {\n                        const p3 = vertex.destination, triangleFreq = particles.getTriangleFrequency(linkParticle, p2, p3);\n                        if (triangleFreq > pOptions.links.triangles.frequency) {\n                            continue;\n                        }\n                        this.drawLinkTriangle(linkParticle, link, vertex);\n                    }\n                }\n            }\n            if (link.opacity > 0 && container.retina.linksWidth > 0) {\n                this.drawLinkLine(linkParticle, link);\n            }\n        }\n        context.restore();\n    }\n    drawLinkTriangle(p1, link1, link2) {\n        var _a;\n        const container = this.container, options = container.actualOptions, p2 = link1.destination, p3 = link2.destination, triangleOptions = p1.options.links.triangles, opacityTriangle = (_a = triangleOptions.opacity) !== null && _a !== void 0 ? _a : (link1.opacity + link2.opacity) / 2;\n        if (opacityTriangle <= 0) {\n            return;\n        }\n        container.canvas.draw((ctx) => {\n            const pos1 = p1.getPosition();\n            const pos2 = p2.getPosition();\n            const pos3 = p3.getPosition();\n            if (getDistance(pos1, pos2) > container.retina.linksDistance ||\n                getDistance(pos3, pos2) > container.retina.linksDistance ||\n                getDistance(pos3, pos1) > container.retina.linksDistance) {\n                return;\n            }\n            let colorTriangle = colorToRgb(triangleOptions.color);\n            if (!colorTriangle) {\n                const linksOptions = p1.options.links, linkColor = linksOptions.id !== undefined\n                    ? container.particles.linksColors.get(linksOptions.id)\n                    : container.particles.linksColor;\n                colorTriangle = getLinkColor(p1, p2, linkColor);\n            }\n            if (!colorTriangle) {\n                return;\n            }\n            drawLinkTriangle(ctx, pos1, pos2, pos3, options.backgroundMask.enable, options.backgroundMask.composite, colorTriangle, opacityTriangle);\n        });\n    }\n    drawLinkLine(p1, link) {\n        const container = this.container, options = container.actualOptions, p2 = link.destination, pos1 = p1.getPosition(), pos2 = p2.getPosition();\n        let opacity = link.opacity;\n        container.canvas.draw((ctx) => {\n            var _a, _b;\n            let colorLine;\n            const twinkle = p1.options.twinkle.lines;\n            if (twinkle.enable) {\n                const twinkleFreq = twinkle.frequency, twinkleRgb = colorToRgb(twinkle.color), twinkling = Math.random() < twinkleFreq;\n                if (twinkling && twinkleRgb) {\n                    colorLine = twinkleRgb;\n                    opacity = getRangeValue(twinkle.opacity);\n                }\n            }\n            if (!colorLine) {\n                const linksOptions = p1.options.links, linkColor = linksOptions.id !== undefined\n                    ? container.particles.linksColors.get(linksOptions.id)\n                    : container.particles.linksColor;\n                colorLine = getLinkColor(p1, p2, linkColor);\n            }\n            if (!colorLine) {\n                return;\n            }\n            const width = (_a = p1.retina.linksWidth) !== null && _a !== void 0 ? _a : container.retina.linksWidth, maxDistance = (_b = p1.retina.linksDistance) !== null && _b !== void 0 ? _b : container.retina.linksDistance;\n            drawLinkLine(ctx, width, pos1, pos2, maxDistance, container.canvas.size, p1.options.links.warp, options.backgroundMask.enable, options.backgroundMask.composite, colorLine, opacity, p1.options.links.shadow);\n        });\n    }\n}\n"]},"metadata":{},"sourceType":"module"}